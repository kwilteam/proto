syntax = "proto3";
package tx;
option go_package = "github.com/kwilteam/kwil-db/api/protobuf/tx/v1;txpb";

message GetSchemaRequest {
    string dbid = 1;
}

message GetSchemaResponse {
    Dataset dataset = 1;
}

message Dataset {
    string owner = 1;
    string name = 2;
    repeated Table tables = 3;
    repeated Action actions = 4;
}

message Table {
    string name = 1;
    repeated Column columns = 2;
    repeated Index indexes = 3;
}

message Column {
    string name = 1;
    string type = 2;
    repeated Attribute attributes = 3;
}

message Attribute {
    string type = 1;
    string value = 2;
}

message Index {
    string name = 1;
    repeated string columns = 2;
    string type = 3;
}

message Action {
    string name = 1;
    bool public = 2;
    repeated string inputs = 3;
    repeated string statements = 4;
}